pipeline {
  agent any
  stages {
    stage('Pull Changes') {

      steps {
                  sh 'echo omienzo nuestro script'
                  sh 'echo antes de borrar'
                  sh 'ls /var/lib/jenkins/workspace'
                  sh 'cd /var/lib/jenkins/workspace'
                  sh 'pwd'
                  sh 'rm -fr nestjs-api-taller'
                  sh 'pwd'
                  sh 'echo despues de borrar'
                  sh 'ls /var/lib/jenkins/workspace'

          sh 'echo Antes de ejecutar'
          sh 'pwd'
          sh 'ls -la'
          git branch: 'main',
                     credentialsId: 'token-git',
                     url: 'https://github.com/Antoniojesus1999/nestjs-api-taller.git'

                echo('Despues de ejcutar')
                sh 'pwd'
                sh 'docker ps'
                sh 'docker ps -a'
      }
    }

  }
}
